<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NIKA BUG V15</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: url('https://files.catbox.moe/ow3coy.jpeg') no-repeat center/cover fixed;
      font-family: 'Courier New', Courier, monospace;
      color: #ffffff;
      user-select: text;
      background-color: #1e1e1e;
    }
    .glow::before {
      content: '';
      position: absolute;
      inset: 0;
      margin: auto;
      width: 260px;
      height: 260px;
      background: radial-gradient(circle at center, #b59f3b 0%, transparent 70%);
      filter: blur(60px);
      opacity: 0.55;
      z-index: -1;
    }
    /* Minecraft pixel box style */
    .pixel-box {
      display: inline-block;
      background:
        linear-gradient(90deg, #f3e88e 50%, #b59f3b 50%) 0 0 / 20% 100% repeat-x,
        linear-gradient(#f3e88e 50%, #b59f3b 50%) 0 0 / 100% 20% repeat-y;
      border: 3px solid #b59f3b;
      box-shadow:
        inset 0 0 0 2px #d1b84a,
        4px 4px 0 0 #7a6b2f;
      padding: 0.4rem 0.8rem;
      border-radius: 0;
      font-weight: 900;
      font-size: 1rem;
      line-height: 1.3;
      text-shadow:
        1px 1px 0 #7a6b2f,
        2px 2px 0 #7a6b2f;
      user-select: text;
      white-space: nowrap;
      cursor: default;
      color: #ffffff;
      transition: background-color 0.2s ease, box-shadow 0.2s ease, color 0.2s ease;
    }
    /* Login button - blue style */
    #loginBtn {
      background:
        linear-gradient(90deg, #3b82f6 50%, #2563eb 50%) 0 0 / 20% 100% repeat-x,
        linear-gradient(#3b82f6 50%, #2563eb 50%) 0 0 / 100% 20% repeat-y;
      border-color: #2563eb;
      box-shadow:
        inset 0 0 0 2px #60a5fa,
        4px 4px 0 0 #1e40af;
      cursor: pointer;
      color: #ffffff;
    }
    #loginBtn:hover {
      background:
        linear-gradient(90deg, #60a5fa 50%, #3b82f6 50%) 0 0 / 20% 100% repeat-x,
        linear-gradient(#60a5fa 50%, #3b82f6 50%) 0 0 / 100% 20% repeat-y;
      box-shadow:
        inset 0 0 0 2px #93c5fd,
        4px 4px 0 0 #1e3a8a;
      color: #e0e7ff;
    }
    /* Logout button - red style */
    #logoutBtn {
      background:
        linear-gradient(90deg, #ef4444 50%, #b91c1c 50%) 0 0 / 20% 100% repeat-x,
        linear-gradient(#ef4444 50%, #b91c1c 50%) 0 0 / 100% 20% repeat-y;
      border-color: #b91c1c;
      box-shadow:
        inset 0 0 0 2px #f87171,
        4px 4px 0 0 #7f1d1d;
      cursor: pointer;
      color: #ffffff;
    }
    #logoutBtn:hover {
      background:
        linear-gradient(90deg, #f87171 50%, #ef4444 50%) 0 0 / 20% 100% repeat-x,
        linear-gradient(#f87171 50%, #ef4444 50%) 0 0 / 100% 20% repeat-y;
      box-shadow:
        inset 0 0 0 2px #fca5a5,
        4px 4px 0 0 #7f1d1d;
      color: #ffe4e6;
    }
    /* Pixel style for block buttons */
    button.pixel-box:not(#loginBtn):not(#logoutBtn) {
      cursor: pointer;
      color: #ffffff;
    }
    button.pixel-box:not(#loginBtn):not(#logoutBtn):hover {
      background:
        linear-gradient(90deg, #f7f1a1 50%, #d9c75a 50%) 0 0 / 20% 100% repeat-x,
        linear-gradient(#f7f1a1 50%, #d9c75a 50%) 0 0 / 100% 20% repeat-y;
      box-shadow:
        inset 0 0 0 2px #e0d35a,
        4px 4px 0 0 #8a7a3f;
      text-shadow:
        1px 1px 0 #8a7a3f,
        2px 2px 0 #8a7a3f;
      color: #ffffff;
    }
    /* Pixel style for inputs */
    input.pixel-box {
      background:
        linear-gradient(90deg, #f3e88e 50%, #b59f3b 50%) 0 0 / 20% 100% repeat-x,
        linear-gradient(#f3e88e 50%, #b59f3b 50%) 0 0 / 100% 20% repeat-y;
      border: 3px solid #b59f3b;
      box-shadow: inset 0 0 0 2px #d1b84a;
      color: #ffffff;
      font-weight: 900;
      font-size: 1rem;
      padding: 0.4rem 0.8rem;
      border-radius: 0;
      outline-offset: 2px;
    }
    input.pixel-box::placeholder {
      color: #e6e6e6;
      font-weight: 900;
    }
    input.pixel-box:focus {
      outline: 3px solid #f3e88e;
      background:
        linear-gradient(90deg, #f7f1a1 50%, #d9c75a 50%) 0 0 / 20% 100% repeat-x,
        linear-gradient(#f7f1a1 50%, #d9c75a 50%) 0 0 / 100% 20% repeat-y;
      box-shadow:
        inset 0 0 0 2px #e0d35a;
      color: #ffffff;
    }
    /* Container adjustments */
    #card {
      background: rgba(30, 30, 30, 0.85);
      padding: 2rem;
      border-radius: 0;
      box-shadow: 6px 6px 0 #7a6b2f;
      max-width: 26rem;
      width: 100%;
    }
    /* Image border pixel style */
    img {
      border: 4px solid #b59f3b;
      box-shadow: 4px 4px 0 #7a6b2f;
      border-radius: 0;
    }
    /* Status text */
    #status {
      min-height: 1.25rem;
      margin-top: 0.5rem;
      color: #f3e88e;
      font-weight: 900;
      text-shadow: 1px 1px 0 #7a6b2f;
    }
    /* Links */
    a.pixel-box {
      text-decoration: none;
      display: inline-block;
      text-align: center;
      color: #ffffff;
    }
    #supportBtn {
  background:
    linear-gradient(90deg, #22c55e 50%, #16a34a 50%) 0 0 / 20% 100% repeat-x,
    linear-gradient(#22c55e 50%, #16a34a 50%) 0 0 / 100% 20% repeat-y;
  border-color: #16a34a;
  box-shadow:
    inset 0 0 0 2px #4ade80,
    4px 4px 0 0 #14532d;
  color: #ffffff;
  font-weight: 900;
  padding: 0.4rem 0.8rem;
  border: 3px solid #16a34a;
  display: inline-block;
  text-align: center;
  cursor: pointer;
  user-select: text;
  text-decoration: none;
  transition: background-color 0.2s ease, box-shadow 0.2s ease, color 0.2s ease;
  border-radius: 0;
}
#supportBtn:hover {
  background:
    linear-gradient(90deg, #4ade80 50%, #22c55e 50%) 0 0 / 20% 100% repeat-x,
    linear-gradient(#4ade80 50%, #22c55e 50%) 0 0 / 100% 20% repeat-y;
  box-shadow:
    inset 0 0 0 2px #86efac,
    4px 4px 0 0 #14532d;
  color: #e6ffe6;
}
  </style>
</head>
<body class="min-h-screen flex items-center justify-center">
  <div class="relative glow">
    <div id="card">

      <!-- LOGIN VIEW -->
      <div id="loginView">
        <div class="pixel-box text-center w-full mb-6">Depay Official</div>
        <div class="flex justify-center items-center py-10 bg-transparent">
          <img src="https://files.catbox.moe/jq6cfe.jpeg" alt="maklo" class="w-40 h-40 object-cover" />
        </div>
        <input id="username" type="text" placeholder="Username your account" class="pixel-box w-full mb-3" />
        <input id="password" type="password" placeholder="Password" class="pixel-box w-full mb-3" />
        <div class="space-y-2">
          <button id="loginBtn" class="pixel-box w-full mb-2">Login</button>
          <a href="https://t.me/DepayOfficiall" id="supportBtn" class="pixel-box mt-2 block">Telegram Depay</a>
        </div>
      </div>

      <!-- MAIN VIEW (hidden by default) -->
      <div id="mainView" class="hidden">
        <div class="flex justify-between items-center mb-6">
          <span id="welcomeUser     " class="pixel-box text-lg"></span>
          <button id="logoutBtn" class="pixel-box">Logout</button>
        </div>

        <form id="bugForm" class="space-y-4" onsubmit="return false;">
          <div class="pixel-box text-center w-full mb-6">Depay Official</div>
          <div class="flex justify-center items-center py-10 bg-transparent">
            <img src="https://files.catbox.moe/uqxlfj.jpeg" alt="maklo" class="w-40 h-40 object-cover" />
          </div>
          <input id="phone" type="text" placeholder="Masukkan nomor target(628xxxx)" class="pixel-box w-full mb-2" />

          <button type="button" id="btnAndroid" class="pixel-box w-full mb-2">Crash Whatsapp</button>
          
            <button type="button" id="btnDelay" class="pixel-box w-full">Delay Invisible</button>
            
            <button type="button" id="btnDelay" class="pixel-box w-full">Crash Beta</button>
            
            <button type="button" id="btnIOS" class="pixel-box w-full">Iphone Crash</button>
          </div>

          <p id="status"></p>
        </form>
      </div>

      <div id="credit" class="pixel-box mt-6 text-center">¬© Depay Official</div>
    <a href="https://t.me/depaychannel" id="supportBtn" class="pixel-box mt-2 block">Saluran Telegram Depayy</a>
    </div>
  </div>

<script>
const usersUrl = 'https://raw.githubusercontent.com/asepgacor/bugapkk/main/README.json';

const loginView = document.getElementById('loginView');
const mainView = document.getElementById('mainView');
const usernameInput = document.getElementById('username');
const passwordInput = document.getElementById('password');
const loginBtn = document.getElementById('loginBtn');
const logoutBtn = document.getElementById('logoutBtn');
const welcomeUser      = document.getElementById('welcomeUser     ');

const phoneInput = document.getElementById('phone');
const statusEl = document.getElementById('status');

if (matchMedia('(prefers-color-scheme: dark)').matches)
  document.body.classList.add('dark');

async function fetchUsers() {
  try {
    const res = await fetch(usersUrl);
    if (!res.ok) throw new Error('Gagal mengambil data user');
    const data = await res.json();
    console.log('Data user terambil:', data);
    return data;
  } catch (e) {
    console.error(e);
    return null;
  }
}

async function checkCredentials(user, pass) {
  const usersData = await fetchUsers();
  if (!usersData) return false;

  return usersData.some(u => u.username === user && u.password === pass);
}

// Fungsi animasi ketikan
function typeWriter(element, text, delay = 50) {
  element.textContent = '';
  let i = 0;
  function typing() {
    if (i < text.length) {
      element.textContent += text.charAt(i);
      i++;
      setTimeout(typing, delay);
    }
  }
  typing();
}

function showMain(user) {
  loginView.classList.add('hidden');
  mainView.classList.remove('hidden');
  typeWriter(welcomeUser     , `Welcome, ${user}`, 80);
}

loginBtn.addEventListener('click', async () => {
  const u = usernameInput.value.trim();
  const p = passwordInput.value.trim();
  if (!u || !p) {
    alert('Isi semua kolom');
    return;
  }

  loginBtn.disabled = true;
  const originalText = loginBtn.textContent;
  loginBtn.textContent = 'Loading...';
  const spinner = document.createElement('span');
  spinner.className = 'spinner';
  loginBtn.appendChild(spinner);

  const ok = await checkCredentials(u, p);

  if (!ok) {
    alert('Username atau password salah');
    loginBtn.disabled = false;
    loginBtn.textContent = originalText;
    return;
  }

  setTimeout(() => {
    localStorage.setItem('username', u);
    loginBtn.disabled = false;
    loginBtn.textContent = originalText;
    showMain(u);
  }, 1000);
});

logoutBtn.onclick = () => {
  localStorage.removeItem('username');
  location.reload();
};

window.onload = () => {
  const saved = localStorage.getItem('username');
  if (saved) showMain(saved);
};

async function sendForcecall() {
  const phone = phoneInput.value.trim();
  if (!phone) {
    statusEl.textContent = '‚ùå Nomor belum diisi';
    return;
  }
  statusEl.textContent = '‚è≥ Mengirim Forcecall...';
  try {
    const res = await fetch(`/api/bug/forceall?target=${encodeURIComponent(phone)}`);
    const data = await res.json();
    statusEl.textContent = data.status ? '‚úÖ Forcecall berhasil!' : `‚ö†Ô∏è Gagal: ${data.message || data.error || 'Unknown'}`;
  } catch (err) {
    console.error(err);
    statusEl.textContent = 'üö´ Gagal terhubung ke API';
  }
}

async function sendDelay() {
  const phone = phoneInput.value.trim();
  if (!phone) {
    statusEl.textContent = '‚ùå Nomor belum diisi';
    return;
  }
  statusEl.textContent = '‚è≥ Mengirim Delay...';
  try {
    const res = await fetch(`/api/bug/delay?target=${encodeURIComponent(phone)}`);
    const data = await res.json();
    statusEl.textContent = data.status ? '‚úÖ Delay berhasil!' : `‚ö†Ô∏è Gagal: ${data.message || data.error || 'Unknown'}`;
  } catch (err) {
    console.error(err);
    statusEl.textContent = 'üö´ Gagal terhubung ke API';
  }
}

async function sendCarousels() {
  const phone = phoneInput.value.trim();
  if (!phone) {
    statusEl.textContent = '‚ùå Nomor belum diisi';
    return;
  }
  statusEl.textContent = '‚è≥ Mengirim Crash iOS...';
  try {
    const res = await fetch(`/api/bug/ios?target=${encodeURIComponent(phone)}`);
    const data = await res.json();
    statusEl.textContent = data.status ? '‚úÖ Crash iOS berhasil!' : `‚ö†Ô∏è Gagal: ${data.message || data.error || 'Unknown'}`;
  } catch (err) {
    console.error(err);
    statusEl.textContent = 'üö´ Gagal terhubung ke API';
  }
}

document.getElementById('btnDelay').onclick = sendDelay;
document.getElementById('btnAndroid').onclick = sendForcecall;
document.getElementById('btnIOS').onclick = sendCarousels;
</script>
</body>
</html>
